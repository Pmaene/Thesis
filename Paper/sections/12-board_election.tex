% 
% Application
% @author Pieter Maene <pieter.maene@student.kuleuven.be>
%

\section{Board Election}
\label{sec:board_election}

The modified Helios voting system was used in the elections for the new board of VTK, the official student organisation for engineering students at the KU Leuven. Support for some specific features was added. The system was then thoroughly tested before the election on May 8\textsuperscript{th} 2014.

\subsection{Election Requirements}

%TODO Election Requirements

A committee of at least five people from the current board watches over the election. The head of this committee is the current president of the board. He should be able to manage the election. It should be possible to appoint the other members as trustees. The decryption process cannot be blocked by one trustee.

%TODO Herschrijven

\par There are two types of candidates: the first can be officially elected as the next board, the second participates for fun. Both should be separate questions on the ballot. If there is only one official team, voters have to be able to vote pro or contra, or to abstain. If there are two teams, at most one should be selectable. If there are more than two, voters should express their appreciation for each team. However, this last case is so rare that it's not a strong requirement for the system. In the election of the fun team, it should be possible to select all of them at most.

\par A list of all eligible voters can be requested from the university. These lists bear the student's first name, last name and university identification number. Only these voters should be able to access the election. Therefore, an authentication system should be available. Finally, the participation percentage should be shown on the result page.

\subsection{Specific Adjustments}

Shibboleth is the single sign-on system used by the KU Leuven. Students have an account with a unique identification number. All voters in the election have such an account, so it could be used to authenticate them. Since Helios' authentication system is modular and already has support for other federated identity systems, adding Shibboleth was relatively straightforward.

\par The list of voters was provided by an external organisation. This included the student's identification number and name, but the e-mail address was missing. This is needed by Helios to send a confirmation message after casting a ballot. A voter's e-mail address is retrieved from the Shibboleth response and added to the account to fix this.

\par Helios did not yet show the election's participation percentage. This is the percentage of eligible voters that cast their vote. The system also immediately published the election result. These are traditionally announced to the public at midnight, but the election administrator does need earlier access. These two smaller features were therefore implemented as well.

\subsection{Tests}
\label{sec:be:tests}

After installing the system on a server, it was thoroughly tested by the current board of VTK. In addition to verifying all technical aspects, the testers were also asked for feedback on the user interfaces. The election admin and booth were tested in the context of the actual election. The real voter list was replaced by the current board of the organisation, though.

\par While testing the threshold encryption process, a bug was found. Real fractions were used for the calculation of the Lagrange interpolation, instead of finite modular arithmetic. After solving this, the result still couldn't be decrypted correctly. By default, Helios was added as a trustee to the election. It completed all steps in the ceremony automatically. During testing, the shares of this trustee turned out to be incompatible with these generated by the other trustees. The only difference between the two is that the former are generated in the Python application and the latter in the JavaScript trustee dashboard. Because the source of the error origin could not be found, Helios no longer could be an election trustee. Since its role in the whole process was already limited, this was not a major change. The main advantage of adding it, was that it allowed users to create an election without real trustees, which resulted in a simpler procedure.

\par Apart from these bugs, the test of the election admin went very well. The election administrator managed to go through the entire procedure independently. The trustees didn't have much difficulty generating their keys either.

\par Although its functionality worked perfectly, a lot of feedback was given on the voting booth. First, a lot of technical terms were used. This was easily solved by replacing them with more common words. Second, most testers found the voting process to be too complicated. The booth is an independent application written in JavaScript, so that only the encrypted vote is sent to the server.

\par There were two places where the user had to submit his vote originally (\ref{fig:be:voting_booth_flows}). After confirming his encrypted vote in the booth, it was sent to the server where it could finally be cast. The last screen of the voting booth was therefore removed. Since it still had to be possible to audit the encrypted vote, this also required the encryption to be moved. This is now done after the voter has made all his choices. As a result, the vote has to be encrypted again when these are changed. The current implementation is already reasonably fast and this will only improve once the Web Cryptography API is available (\ref{sec:web_cryptography_api}). Finally, an alert is shown when voters try to leave the page where they have to upload their ballot to the server before doing so. The test was repeated after making these adjustments to verify their impact on both functionality and usability.
 
\begin{figure}
  \centering
  \begin{minipage}{.45\linewidth}
    \centering
    \scalebox{.6}{\input{images/old_voting_booth_flow.tikz}}
  \end{minipage}
  \quad
  \begin{minipage}{.45\linewidth}
    \centering
    \scalebox{.6}{\input{images/new_voting_booth_flow.tikz}}
  \end{minipage}
  \caption{Old (Left) and New (Right) Voting Booth Flows}
  \label{fig:be:voting_booth_flows}
\end{figure}

\par Finally, a stress test was run as well. This was done for a separate election with two trustees and three questions. \np{1000} votes were inserted into the database. To do this, the encrypted votes were generated directly in Python instead of using the JavaScript voting booth. The result was decrypted successfully, indicating that the system can manage an election of that size.

\subsection{Election Day}

The election itself took place on May 8\textsuperscript{th} 2014 from 7 am till 8 pm. During this time, 768 people cast a ballot, which isn't significantly less than during previous years. This is a strong indication that the voting process was clear. No complaints were received from these voters either.

\par Since everything had been tested in advance, no problems were encountered during the voting or when decrypting the result.
